(function(){"use strict";var e={5875:function(e,t,s){var o=s(9242),r=s(3396),a=s(7139);function n(e,t,s,o,n,i){const l=(0,r.up)("Header"),u=(0,r.up)("router-view"),c=(0,r.up)("Footer"),d=(0,r.up)("notifications");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(e.$style.wrapper)},[(0,r._)("header",null,[(0,r.Wm)(l)]),(0,r._)("main",null,[(0,r.Wm)(u)]),(0,r._)("footer",null,[(0,r.Wm)(c)]),(0,r.Wm)(d,{position:"top right",class:"notifications",style:{top:"100px",right:"100px"}})],2)}const i={class:"container"},l=(0,r.Uk)("Application of user roles");function u(e,t,s,o,n,u){const c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(e.$style.header)},[(0,r._)("div",i,[(0,r._)("div",{class:(0,a.C_)(e.$style["header__inner"])},[(0,r._)("h2",{class:(0,a.C_)(e.$style["header__logo"])},[(0,r.Wm)(c,{to:"/"},{default:(0,r.w5)((()=>[l])),_:1})],2)],2)])],2)}var c={name:"header"},d={header:"header_header_iD9R3",header__logo:"header_header__logo_sPtuD"},_=s(89);const p={};p["$style"]=d;const h=(0,_.Z)(c,[["render",u],["__cssModules",p]]);var g=h;const f={class:"container"},m=(0,r.Uk)("Aftor: "),v=(0,r._)("a",{href:"https://senpaz.github.io/"}," Nikolaev Artem",-1),y=[m,v];function $(e,t,s,o,n,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(e.$style.footer)},[(0,r._)("div",f,[(0,r._)("div",{class:(0,a.C_)(e.$style["footer__inner"])},[(0,r._)("div",{class:(0,a.C_)(e.$style["footer__copy"])}," Все права защищены 2022",2),(0,r._)("div",{class:(0,a.C_)(e.$style["footer__aftor"])},y,2)],2)])],2)}var w={name:"footer"},U={footer:"footer_footer_iUTdB",footer__inner:"footer_footer__inner_TnY4h",footer__copy:"footer_footer__copy_OKvSd",footer__aftor:"footer_footer__aftor_MP_31"};const b={};b["$style"]=U;const k=(0,_.Z)(w,[["render",$],["__cssModules",b]]);var C=k,R={name:"App",components:{Footer:C,Header:g}},x={wrapper:"App_wrapper_Ut86Z"};const S={};S["$style"]=x;const E=(0,_.Z)(R,[["render",n],["__cssModules",S]]);var O=E;const M={class:"container"},D=(0,r._)("h1",null,"Список пользователей",-1),j=(0,r.Uk)("Страница номер: "),T=["onClick"],Z=(0,r._)("b",null,"id:",-1),z=(0,r.Uk)(),A=(0,r._)("b",null," name: ",-1),N=["disabled"],P=["disabled"];function W(e,t,s,o,n,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(e.$style.users)},[(0,r._)("div",M,[D,(0,r._)("div",{class:(0,a.C_)(e.$style["users__pages"])},[j,(0,r._)("b",null,(0,a.zw)(n.paginate.page+1),1)],2),(0,r._)("ul",{class:(0,a.C_)(e.$style.users__list)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getUsers,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,onClick:s=>e.$router.push(`/users/${t.id}`)},[(0,r._)("span",null,[Z,(0,r.Uk)(" "+(0,a.zw)(t&&t.id),1)]),z,A,(0,r.Uk)(" "+(0,a.zw)(t&&t.name),1)],8,T)))),128))],2),(0,r._)("div",{class:(0,a.C_)(e.$style.paginate)},[(0,r._)("button",{class:(0,a.C_)(e.$style["paginate__prev"]),onClick:t[0]||(t[0]=e=>n.paginate.page-=1),disabled:0===n.paginate.page}," Prev",10,N),(0,r._)("button",{class:(0,a.C_)(e.$style["paginate__next"]),onClick:t[1]||(t[1]=e=>n.paginate.page+=1),disabled:3===n.paginate.page}," Next",10,P)],2)])],2)}var H=s(65),L={name:"home-page",data(){return{paginate:{page:0,limit:5},page:0}},computed:{...(0,H.Se)(["getRoles","getUsers","getUser"])},async mounted(){null!==this.$store.state.roles&&0!==this.$store.state.roles.length||await this.$store.dispatch("getRoles")},watch:{paginate:{async handler(e){await this.$store.dispatch("getUsers",e)},deep:!0,immediate:!0}}},Y={users:"index_users_fBgY6",users__pages:"index_users__pages_igc8h",users__list:"index_users__list_m0moG",paginate:"index_paginate_EyN81"};const B={};B["$style"]=Y;const F=(0,_.Z)(L,[["render",W],["__cssModules",B]]);var K=F;const V={class:"container"},q=(0,r.Uk)(" ↩ Back to Users List"),G=(0,r._)("h2",null,"Список ролей у данного пользователя",-1),I=["onClick"],J=(0,r._)("h3",null,"Добавте новую роль",-1);function Q(e,t,s,n,i,l){const u=(0,r.up)("router-link"),c=(0,r.up)("Multiselect");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(e.$style.user)},[(0,r._)("div",V,[(0,r._)("div",{class:(0,a.C_)(e.$style.back)},[(0,r.Wm)(u,{to:"/"},{default:(0,r.w5)((()=>[q])),_:1})],2),(0,r._)("h1",null,"Профиль пользователя с именем: "+(0,a.zw)(e.getUser&&e.getUser.name),1),G,(0,r._)("ul",{class:(0,a.C_)(e.$style.users__list)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getUser&&e.getUser.roles,((t,s)=>((0,r.wg)(),(0,r.iD)("li",{key:s},[(0,r._)("span",null,(0,a.zw)(s+1)+" : "+(0,a.zw)(e.getRoles[t-1]),1),(0,r._)("button",{onClick:(0,o.iM)((e=>l.deleteRole(t)),["prevent"])},"Delete",8,I)])))),128))],2),(0,r._)("div",null,[J,(0,r.Wm)(c,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),options:i.rolesAll,valueProp:"id",label:"name",placeholder:"Выберите роль"},null,8,["modelValue","options"]),(0,r._)("div",{class:(0,a.C_)(e.$style["users__addRole"])},[(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>l.addNewRole&&l.addNewRole(...e))},"Добавить")],2)])])],2)}var X=s(9810),ee={name:"User",props:["id"],data(){return{value:null,rolesAll:[{id:1},{id:2},{id:3},{id:4}]}},components:{Multiselect:X.Z},computed:{...(0,H.Se)(["getRoles","getUser"])},methods:{async deleteRole(e){const t={id:this.id,role:e},s=confirm("Вы уверены что хотите удалить роль?");s&&(await this.$store.dispatch("deleteRoleUser",t),await this.$store.dispatch("getUser",this.id),this.$notify("Роль успешно удалена"))},async addNewRole(){const e={id:this.id,role:this.value},t=await this.axios.post(`/user/${e.id}/role/${e.role}`);console.log(t),t&&t.data&&0===t.data.status?(await this.$store.dispatch("getUser",this.id),this.$notify("Роль успешно добавлена")):this.$notify("Этому пользователю уже была назначена эта роль, выберите другую")}},async mounted(){await this.$store.dispatch("getRoles"),await this.$store.dispatch("getUser",this.id),this.rolesAll.forEach(((e,t)=>{e.name=this.getRoles[t]}))}},te={user:"user_user_Djueq",back:"user_back_NrgcS",users__list:"user_users__list_HNUcE",users__addRole:"user_users__addRole_IzWjM"};const se={};se["$style"]=te;const oe=(0,_.Z)(ee,[["render",Q],["__cssModules",se]]);var re=oe,ae=s(678);const ne=[{path:"/",component:K},{path:"/users/:id",component:re,props:!0}],ie=(0,ae.p7)({history:(0,ae.PO)("/users/"),routes:ne});var le=ie,ue=s(6265),ce=s.n(ue);const de=ce().create({baseURL:"https://test-js.alef.dev",timeout:6e4,headers:{"Content-Type":"application/json"}});var _e=de,pe=s(6423),he=(0,H.MT)({state:()=>({roles:null,users:null,user:null}),mutations:{SET_ROLES(e,t){e.roles=t},SET_USERS(e,t){e.users=t},SET_USER(e,t){e.user=t}},actions:{async getRoles({commit:e}){try{const t=await this.$axios.get("/roles");200!==t.status&&201!==t.status||(console.log(t&&t.data,"getRoles"),e("SET_ROLES",t&&t.data&&t.data.data))}catch(t){console.log(t)}},async getUsers({commit:e},t){try{const s=await this.$axios.get(`/users?page=${t.page}?count=${t.limit}`);200!==s.status&&201!==s.status||e("SET_USERS",s&&s.data&&s.data.data)}catch(s){console.log(s)}},async getUser({commit:e},t){try{const s=await this.$axios.get(`/user/${t}`);200!==s.status&&201!==s.status||e("SET_USER",s&&s.data&&s.data.data)}catch(s){console.log(s)}},async deleteRoleUser({commit:e},t){try{await this.$axios.delete(`/user/${t.id}/role/${t.role}`)}catch(s){console.log(s)}},async addRoleUser({commit:e},t){try{await this.$axios.post(`/user/${t.id}/role/${t.role}`)}catch(s){console.log(s)}}},getters:{getRoles:e=>e.roles,getUsers:e=>e.users,getUser:e=>e.user},modules:{}}),ge=s(2636);he.$axios=_e,console.log(he);const fe=(0,o.ri)(O);fe.use(he),fe.use(le),fe.use(ge.Z),fe.use(pe.Z,_e),fe.mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o](a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,o,r,a){if(!o){var n=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,n=o[0],i=o[1],l=o[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var c=l(s)}for(t&&t(o);u<n.length;u++)a=n[u],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},o=self["webpackChunkusers_prod"]=self["webpackChunkusers_prod"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(5875)}));o=s.O(o)})();
//# sourceMappingURL=app.bb42a662.js.map